
package parkingapp.service;

import java.util.ArrayList;
import java.util.Iterator;
import java.util.List;
import parkingapp.model.ParkingSlot;

public class ParkingService {
   private List<ParkingSlot> slots = new ArrayList();
   private final int LIMIT = 3;

   public ParkingService() {
      for(int var1 = 1; var1 <= 3; ++var1) {
         this.slots.add(new ParkingSlot(var1));
      }

   }

   public String parkVehicle(String var1) {
      Iterator var2 = this.slots.iterator();

      ParkingSlot var3;
      do {
         if (!var2.hasNext()) {
            return "Parking Full! (Limit: 3 vehicles)";
         }

         var3 = (ParkingSlot)var2.next();
      } while(!var3.isEmpty());

      var3.parkVehicle(var1);
      return " Vehicle " + var1 + " parked at Slot " + var3.getSlotNumber();
   }

   public String leaveSlot(String var1) {
      Iterator var2 = this.slots.iterator();

      ParkingSlot var3;
      do {
         if (!var2.hasNext()) {
            return " Vehicle not found!";
         }

         var3 = (ParkingSlot)var2.next();
      } while(var3.isEmpty() || !var3.getVehicleNumber().equals(var1));

      var3.clearSlot();
      return " Vehicle " + var1 + " has left Slot " + var3.getSlotNumber();
   }

   public String viewSlots() {
      StringBuilder var1 = new StringBuilder("Current Parking Slots:\n\n");

      for(Iterator var2 = this.slots.iterator(); var2.hasNext(); var1.append("\n")) {
         ParkingSlot var3 = (ParkingSlot)var2.next();
         var1.append("Slot ").append(var3.getSlotNumber()).append(": ");
         if (var3.isEmpty()) {
            var1.append("Empty");
         } else {
            var1.append(var3.getVehicleNumber());
         }
      }

      return var1.toString();
   }
}
